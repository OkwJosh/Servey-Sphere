{% extends 'surveys/base.html' %}

{% block title %}{{ survey.title }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8 mx-auto">
        <div class="card">
            <div class="card-header">
                <h2>{{ survey.title }}</h2>
                {% if survey.description %}
                    <p class="text-muted">{{ survey.description }}</p>
                {% endif %}
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    
                    {% for question in questions %}
                        <div class="mb-4">
                            <label class="form-label">
                                <strong>{{ forloop.counter }}. {{ question.text }}</strong>
                                {% if question.is_required %}
                                    <span class="text-danger">*</span>
                                {% endif %}
                            </label>
                            
                            {% if question.help_text %}
                                <div class="form-text">{{ question.help_text }}</div>
                            {% endif %}
                            
                            {% if question.question_type == 'text' %}
                                <input type="text" 
                                       name="question_{{ question.id }}" 
                                       class="form-control"
                                       {% if question.is_required %}required{% endif %}>
                            
                            {% elif question.question_type == 'textarea' %}
                                <textarea name="question_{{ question.id }}" 
                                          class="form-control" 
                                          rows="4"
                                          {% if question.is_required %}required{% endif %}></textarea>
                            
                            {% elif question.question_type == 'email' %}
                                <input type="email" 
                                       name="question_{{ question.id }}" 
                                       class="form-control"
                                       {% if question.is_required %}required{% endif %}>
                            
                            {% elif question.question_type == 'number' %}
                                <input type="number" 
                                       name="question_{{ question.id }}" 
                                       class="form-control" 
                                       step="0.01"
                                       {% if question.is_required %}required{% endif %}>
                            
                            {% elif question.question_type == 'radio' %}
                                {% for option in question.options.all %}
                                    <div class="form-check">
                                        <input class="form-check-input" 
                                               type="radio" 
                                               name="question_{{ question.id }}" 
                                               value="{{ option.id }}" 
                                               id="q{{ question.id }}_opt{{ option.id }}"
                                               {% if question.is_required %}required{% endif %}>
                                        <label class="form-check-label" for="q{{ question.id }}_opt{{ option.id }}">
                                            {{ option.text }}
                                        </label>
                                    </div>
                                {% endfor %}
                            
                            {% elif question.question_type == 'checkbox' %}
                                {% for option in question.options.all %}
                                    <div class="form-check">
                                        <input class="form-check-input" 
                                               type="checkbox" 
                                               name="question_{{ question.id }}" 
                                               value="{{ option.id }}" 
                                               id="q{{ question.id }}_opt{{ option.id }}">
                                        <label class="form-check-label" for="q{{ question.id }}_opt{{ option.id }}">
                                            {{ option.text }}
                                        </label>
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                    {% endfor %}
                    
                    <div class="d-grid">
                        <button type="submit" class="btn btn-success btn-lg">Submit Survey</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}